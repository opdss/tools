{% extends "layout.twig" %}

{% block container %}
    <h3 class="page-header">CSS在线美化压缩</h3>

    <p class="text-muted">
        待格式化CSS代码：
        {{ Bootstrap.iconBtn('copy', {'data-obj':'#origin_textarea'})|raw }}
        {{ Bootstrap.iconBtn('remove', {'data-obj':'#origin_textarea'})|raw }}
    </p>
    {{ Bootstrap.textarea('origin_textarea', 10, test)|raw }}
    <div style="margin: 10px 0px;"></div>
    <div class="text-center">
        {{ Bootstrap.button({'id':'submit', 'data-obj':'#origin_textarea|#result_textarea'}, 'CSS格式化&美化')|raw }}
        {{ Bootstrap.button({'id':'resubmit', 'data-obj':'#origin_textarea|#result_textarea'}, '压缩CSS')|raw }}
    </div>
    <p class="text-muted">
        格式化化之后的CSS代码：
        {{ Bootstrap.iconBtn('copy', {'data-obj':'#result_textarea'})|raw }}
        {{ Bootstrap.iconBtn('remove', {'data-obj':'#result_textarea'})|raw }}
        {{ Bootstrap.iconBtn('retweet', {'data-obj':'#origin_textarea|#result_textarea'})|raw }}
    </p>
    {{ Bootstrap.textarea('result_textarea')|raw }}


{% endblock %}

{% block script %}
    <script type="text/javascript">
        var cssOpt =  {
            "allowed_file_extensions": ["css", "scss", "sass", "less"],
            "end_with_newline": false, // End output with newline
            "indent_char": "\t", // Indentation character
            "indent_size": 1, // Indentation size
            "newline_between_rules": true, // Add a new line after every css rule
            "selector_separator": " ",
            "selector_separator_newline": false // Separate selectors with newline or not (e.g. "a,\nbr" or "a, br")
        };

        $('#submit').click(function () {
            var obj = $(this).data('obj');
            var arr = obj.split('|');
            if (arr.length != 2){
                console.log('submit operation arr error', obj);
                return false;
            }
            $(arr[1]).val(css_beautify($(arr[0]).val()));
        });
    </script>
{% endblock %}